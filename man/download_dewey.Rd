% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/duckdb.r
\name{download_dewey}
\alias{download_dewey}
\title{Download a Dewey dataset to local parquet files}
\usage{
download_dewey(
  api_key,
  data_id,
  output_dir,
  partition,
  overwrite = FALSE,
  where = NULL,
  select = NULL
)
}
\arguments{
\item{api_key}{Your Dewey API key. Store in \code{.Renviron} as
\code{DEWEY_API_KEY} and access with \code{Sys.getenv("DEWEY_API_KEY")}.}

\item{data_id}{The Dewey dataset ID (e.g. \code{"prj_xxx__fldr_yyy"}).}

\item{output_dir}{Path to the base directory where the dataset folder will be created.}

\item{partition}{Column name to partition by. If omitted, deweyr will use
Dewey's suggested partition column if one exists, otherwise it will error.
Pass \code{NULL} explicitly to download as a single unpartitioned parquet file.}

\item{overwrite}{If \code{FALSE} (default), errors if the output folder already
exists. Pass \code{TRUE} to delete and re-download.}

\item{where}{Optional SQL WHERE clause string (no validation â€” errors are on you).
Example: \code{where = "CARRIER_GROUP = 'Major'"}}

\item{select}{Optional vector of column indices, ranges, or names to download.
Accepts mixed input e.g. \code{c(1:3, 7, "CARRIER_NAME")}. The partition
column will always be added automatically if missing.}
}
\value{
The path to the downloaded dataset folder, invisibly. Pipe into
\code{read_dewey()} to read immediately after downloading.
}
\description{
Downloads a Dewey dataset to a local directory as parquet files. Optionally
partition by a column, filter rows, and select columns before downloading.
Returns the path to the downloaded folder invisibly, so you can pipe directly
into \code{read_dewey()}.
}
\examples{
\dontrun{
api_key <- Sys.getenv("DEWEY_API_KEY")
data_id <- "prj_xxx__fldr_yyy"
base_dir <- "C:/dewey-downloads"

# Use dewey's default partition
download_dewey(api_key, data_id, base_dir)

# Supply your own partition column
download_dewey(api_key, data_id, base_dir, partition = "MONTH_DATE_PARSED")

# No partitioning
download_dewey(api_key, data_id, base_dir, partition = NULL)

# Filter and select columns
download_dewey(api_key, data_id, base_dir,
    partition = "MONTH_DATE_PARSED",
    where = "CARRIER_GROUP = 'Major'",
    select = c(1:3, "TOTAL")
)

# Download and read in one step
df <- download_dewey(api_key, data_id, base_dir, partition = "MONTH_DATE_PARSED") |>
    read_dewey()
}

}
\seealso{
\code{vignette("getting-started", package = "deweyr")} for a full walkthrough
of downloading and reading your first dataset.
}
